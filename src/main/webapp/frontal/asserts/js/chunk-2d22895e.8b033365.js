(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2d22895e"],{da8c:function(e,t,r){"use strict";r.r(t),r("8e6e"),r("ac6a"),r("456d");var l=r("ade3"),a=r("c24f"),o={data:function(){return{dialogFormVisible:!1,name:"",ruleForm:{firstname:"",lastname:"",date1:"",date2:"",delivery:!1,type:[],resource:"",age:""},rules:{firstname:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"}],lastname:[{required:!0,message:"请输入活动名称"}],age:[{required:!0,message:"请输入活动名称"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){return!!e&&(Object(a.a)(t.ruleForm).then((function(){t.$parent.fetchList(),t.dialogFormVisible=!1,t.$refs.ruleForm.resetFields()})),void t.$message({showClose:!0,message:"恭喜你，这是一条成功消息",type:"success"}))}))},resetForm:function(e){this.$refs[e].resetFields()},beforeClose:function(e){this.$refs[e].resetFields()}}},s=r("2877"),i=Object(s.a)(o,(function(){var e=this,t=e.$createElement;t=e._self._c||t;return t("el-dialog",{attrs:{title:"新增",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("div",[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"活动名称",prop:"firstname"}},[t("el-input",{model:{value:e.ruleForm.firstname,callback:function(t){e.$set(e.ruleForm,"firstname",t)},expression:"ruleForm.firstname"}})],1),t("el-form-item",{attrs:{label:"活动区域",prop:"lastname"}},[t("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.ruleForm.lastname,callback:function(t){e.$set(e.ruleForm,"lastname",t)},expression:"ruleForm.lastname"}},[t("el-option",{attrs:{label:"区域一",value:"shanghai"}}),t("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1),t("el-form-item",{attrs:{label:"活动时间"}},[t("el-col",{attrs:{span:11}},[t("el-form-item",{attrs:{prop:"date1"}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.ruleForm.date1,callback:function(t){e.$set(e.ruleForm,"date1",t)},expression:"ruleForm.date1"}})],1)],1),t("el-col",{staticClass:"line",staticStyle:{"text-align":"center"},attrs:{span:2}},[e._v("-")]),t("el-col",{attrs:{span:11}},[t("el-form-item",{attrs:{prop:"date2"}},[t("el-time-picker",{staticStyle:{width:"100%"},attrs:{type:"fixed-time",placeholder:"选择时间"},model:{value:e.ruleForm.date2,callback:function(t){e.$set(e.ruleForm,"date2",t)},expression:"ruleForm.date2"}})],1)],1)],1),t("el-form-item",{attrs:{label:"即时配送",prop:"delivery"}},[t("el-switch",{model:{value:e.ruleForm.delivery,callback:function(t){e.$set(e.ruleForm,"delivery",t)},expression:"ruleForm.delivery"}})],1),t("el-form-item",{attrs:{label:"活动性质",prop:"type"}},[t("el-checkbox-group",{model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},[t("el-checkbox",{attrs:{label:"美食/餐厅线上活动",name:"type"}}),t("el-checkbox",{attrs:{label:"地推活动",name:"type"}}),t("el-checkbox",{attrs:{label:"线下主题活动",name:"type"}}),t("el-checkbox",{attrs:{label:"单纯品牌曝光",name:"type"}})],1)],1),t("el-form-item",{attrs:{label:"特殊资源",prop:"resource"}},[t("el-radio-group",{model:{value:e.ruleForm.resource,callback:function(t){e.$set(e.ruleForm,"resource",t)},expression:"ruleForm.resource"}},[t("el-radio",{attrs:{label:"线上品牌商赞助"}}),t("el-radio",{attrs:{label:"线下场地免费"}})],1)],1),t("el-form-item",{attrs:{label:"活动形式",prop:"age"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.ruleForm.age,callback:function(t){e.$set(e.ruleForm,"age",t)},expression:"ruleForm.age"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("立即创建")]),t("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)])}),[],!1,null,"d59f1fde",null).exports;function n(e,t){var r,l=Object.keys(e);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(e),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,r)),l}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t){var r,l=Object.keys(e);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(e),t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,r)),l}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r={data:function(){return{dialogFormVisible:!1,name:"",ruleForm:{firstname:"",lastname:"",date1:"",date2:"",delivery:!1,type:[],resource:"",age:""},rules:{firstname:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"}],lastname:[{required:!0,message:"请输入活动名称"}],age:[{required:!0,message:"请输入活动名称"}]}}},methods:{setData:function(e){this.ruleForm=c(c({},this.ruleForm),e)},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){return!!e&&(Object(a.c)(t.ruleForm._id,t.ruleForm).then((function(){t.$parent.fetchList(),t.dialogFormVisible=!1,t.$refs.ruleForm.resetFields()})),void t.$message({showClose:!0,message:"恭喜你，编辑成功",type:"success"}))}))},resetForm:function(e){this.$refs[e].resetFields()},beforeClose:function(e){this.$refs[e].resetFields()}}},o=Object(s.a)(r,(function(){var e=this,t=e.$createElement;t=e._self._c||t;return t("el-dialog",{attrs:{title:"编辑",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("div",[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"活动名称",prop:"firstname"}},[t("el-input",{model:{value:e.ruleForm.firstname,callback:function(t){e.$set(e.ruleForm,"firstname",t)},expression:"ruleForm.firstname"}})],1),t("el-form-item",{attrs:{label:"活动区域",prop:"lastname"}},[t("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.ruleForm.lastname,callback:function(t){e.$set(e.ruleForm,"lastname",t)},expression:"ruleForm.lastname"}},[t("el-option",{attrs:{label:"区域一",value:"shanghai"}}),t("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1),t("el-form-item",{attrs:{label:"活动时间"}},[t("el-col",{attrs:{span:11}},[t("el-form-item",{attrs:{prop:"date1"}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.ruleForm.date1,callback:function(t){e.$set(e.ruleForm,"date1",t)},expression:"ruleForm.date1"}})],1)],1),t("el-col",{staticClass:"line",staticStyle:{"text-align":"center"},attrs:{span:2}},[e._v("-")]),t("el-col",{attrs:{span:11}},[t("el-form-item",{attrs:{prop:"date2"}},[t("el-time-picker",{staticStyle:{width:"100%"},attrs:{type:"fixed-time",placeholder:"选择时间"},model:{value:e.ruleForm.date2,callback:function(t){e.$set(e.ruleForm,"date2",t)},expression:"ruleForm.date2"}})],1)],1)],1),t("el-form-item",{attrs:{label:"即时配送",prop:"delivery"}},[t("el-switch",{model:{value:e.ruleForm.delivery,callback:function(t){e.$set(e.ruleForm,"delivery",t)},expression:"ruleForm.delivery"}})],1),t("el-form-item",{attrs:{label:"活动性质",prop:"type"}},[t("el-checkbox-group",{model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},[t("el-checkbox",{attrs:{label:"美食/餐厅线上活动",name:"type"}}),t("el-checkbox",{attrs:{label:"地推活动",name:"type"}}),t("el-checkbox",{attrs:{label:"线下主题活动",name:"type"}}),t("el-checkbox",{attrs:{label:"单纯品牌曝光",name:"type"}})],1)],1),t("el-form-item",{attrs:{label:"特殊资源",prop:"resource"}},[t("el-radio-group",{model:{value:e.ruleForm.resource,callback:function(t){e.$set(e.ruleForm,"resource",t)},expression:"ruleForm.resource"}},[t("el-radio",{attrs:{label:"线上品牌商赞助"}}),t("el-radio",{attrs:{label:"线下场地免费"}})],1)],1),t("el-form-item",{attrs:{label:"活动形式",prop:"age"}},[t("el-input",{attrs:{type:"textarea"},model:{value:e.ruleForm.age,callback:function(t){e.$set(e.ruleForm,"age",t)},expression:"ruleForm.age"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("立即创建")]),t("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)])}),[],!1,null,"53ccaa73",null).exports,r={data:function(){return{tableObj:{total:0,currentPage:0,tableData:[]},name:"user"}},mounted:function(){},methods:{handleEdit:function(e,t){this.$parent.$refs.editRegion.dialogFormVisible=!0,this.$parent.$refs.editRegion.setData(t)},handleDelete:function(e,t){var r=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(a.b)(t._id).then((function(){r.$parent.fetchList(),r.$message({showClose:!0,message:"删除成功",type:"success"})}))})).catch((function(){}))},handleSizeChange:function(e){this.$parent.setSearch({pageSize:e}),this.$parent.fetchList()},handleCurrentChange:function(e){this.$parent.setSearch({pageNum:e}),this.$parent.fetchList()}}},o={components:{Add:i,List:Object(s.a)(r,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableObj.tableData,height:e.$attrs.height,border:""}},[r("el-table-column",{attrs:{label:"日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("i",{staticClass:"el-icon-time"}),r("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.age))])]}}])}),r("el-table-column",{attrs:{label:"姓名"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-popover",{attrs:{trigger:"hover",placement:"top"}},[r("p",[e._v("姓名: "+e._s(t.row.firstname))]),r("p",[e._v("住址: "+e._s(t.row.lastname))]),r("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[r("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.age))])],1)])]}}])}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini"},on:{click:function(r){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),r("div",{staticClass:"block",staticStyle:{position:"relative",top:"-80px"}},[r("el-pagination",{attrs:{"current-page":e.tableObj.currentPage,"page-sizes":[10,20,30,40],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.tableObj.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)}),[],!1,null,"3c6e8d76",null).exports,Edit:o},data:function(){return{searchObj:{pageNum:1,pageSize:10,user:"",region:""},formInline:{user:"",region:""},height:0,name:"user"}},created:function(){var e=document.documentElement.clientHeight-120;this.height=e},mounted:function(){this.fetchList()},methods:{setSearch:function(e){this.searchObj=m(m({},this.searchObj),e)},fetchList:function(){var e=this;Object(a.e)(this.searchObj).then((function(t){e.$refs.listRegion.tableObj=t.data}))},onSubmit:function(){this.setSearch(this.formInline),this.fetchList(),this.$message({showClose:!0,message:"查询",type:"success"})},onAdd:function(){this.$refs.addRegion.dialogFormVisible=!0}}},o=Object(s.a)(o,(function(){var e=this,t=e.$createElement;t=e._self._c||t;return t("div",{staticStyle:{width:"100%"}},[t("div",{staticClass:"pad10"},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[t("el-form-item",{attrs:{label:"审批人"}},[t("el-input",{attrs:{placeholder:"审批人"},model:{value:e.formInline.user,callback:function(t){e.$set(e.formInline,"user",t)},expression:"formInline.user"}})],1),t("el-form-item",{attrs:{label:"活动区域"}},[t("el-select",{attrs:{placeholder:"活动区域"},model:{value:e.formInline.region,callback:function(t){e.$set(e.formInline,"region",t)},expression:"formInline.region"}},[t("el-option",{attrs:{label:"区域一",value:"shanghai"}}),t("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")]),t("el-button",{attrs:{type:"primary"},on:{click:e.onAdd}},[e._v("新增")])],1)],1)],1),t("List",{ref:"listRegion",attrs:{height:e.height}}),t("transition",{attrs:{name:"el-zoom-in-top"}},[t("Add",{ref:"addRegion"})],1),t("transition",{attrs:{name:"el-zoom-in-top"}},[t("Edit",{ref:"editRegion"})],1)],1)}),[],!1,null,"f0b90128",null),t.default=o.exports}}]);