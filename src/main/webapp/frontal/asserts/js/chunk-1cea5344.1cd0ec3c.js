(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1cea5344"],{"0dfb":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAMCAYAAABSgIzaAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTMyIDc5LjE1OTI4NCwgMjAxNi8wNC8xOS0xMzoxMzo0MCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUuNSAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6Nzk2OTc4QzEwRjhDMTFFQjk4NERBNUY5Qjg3NUQ0RDkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6Nzk2OTc4QzIwRjhDMTFFQjk4NERBNUY5Qjg3NUQ0RDkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3OTY5NzhCRjBGOEMxMUVCOTg0REE1RjlCODc1RDREOSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3OTY5NzhDMDBGOEMxMUVCOTg0REE1RjlCODc1RDREOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PjZVdV8AAADaSURBVHjaYvz//z8DNmA5/fsCICVwPJMzAJs8Ew5NhUAqHoj9gewWbGoY0W0EKowCUkvR1OUBbZ6M00agpkwsmkBgElCuEVmABU3BPyCeAMTMQJwLFZsDxB+A+CdepyLZDpPgBDrzB7o8C1CBIpD+BpR8iaRJEUmNDhCfQZITAlKCID+eAuJqNAO/APFtIL4DxO/R5EDhcATkRx6on+AAaPtrIKXGgB2wATEHyMbvQPyWgXgAMvQHyEYuINYFul2PSI2GID0gjeuB2BuI7UGhTEDTf6i3dgMEGAAzK0HcFafrYQAAAABJRU5ErkJggg=="},1751:function(t,e,a){"use strict";var i=a("abb3");a.n(i).a},"2f3b":function(t,e,a){"use strict";a.d(e,"e",(function(){return s})),a.d(e,"g",(function(){return l})),a.d(e,"f",(function(){return r})),a.d(e,"h",(function(){return o})),a.d(e,"i",(function(){return c})),a.d(e,"c",(function(){return d})),a.d(e,"d",(function(){return u})),a.d(e,"b",(function(){return p})),a.d(e,"j",(function(){return m})),a.d(e,"a",(function(){return h}));var i=a("1b11"),n=ServerGlobalConstant.BASE_URL,s=function(t){return i.a.request({url:n+"/warninghomecontroller/getneedhandletask",method:"get",params:t})},l=function(t){return i.a.request({url:n+"/warninghomecontroller/gettasktypeinfo/"+t,method:"get"})},r=function(t){return i.a.request({url:n+"/warninghomecontroller/gettaskhandleorderinfo/"+t,method:"get"})},o=function(t){return i.a.request({url:n+"/warninghomecontroller/getwarningtaskmonthlytrend",method:"get",params:t})},c=function(t){return i.a.request({url:n+"/taskcentercontroller/queryTasks",method:"post",data:t})},d=function(t){return i.a.request({url:n+"/taskcentercontroller/getTaskById/"+t,method:"get"})},u=function(t){return i.a.request({url:n+"/taskcentercontroller/getYjRwDepartments",method:"get",params:t})},p=function(t){return i.a.request({url:n+"/taskcentercontroller/getAllWarningTypes",method:"get",params:t})},m=function(t){return i.a.request({url:n+"/taskcentercontroller/taskFeedback",method:"post",data:t})},h=function(t){return i.a.request({url:n+"/taskcentercontroller/deletefile/"+t,method:"get"})}},6583:function(t,e,a){"use strict";var i=a("a535");a.n(i).a},7319:function(t,e,a){"use strict";a.r(e),a("8e6e"),a("456d"),a("ac6a"),a("7f7f");var i=a("ade3"),n=a("2f3b");function s(t,e){var a,i=Object.keys(t);return Object.getOwnPropertySymbols&&(a=Object.getOwnPropertySymbols(t),e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)),i}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?s(Object(a),!0).forEach((function(e){Object(i.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var r={data:function(){return{active:1,title:"空气质量变化趋势",currentItems:{SJJSSJ:1603182199e3,CJSJ:1603241928e3,RWCSYY:"PM2.5湖山乡站连续15分钟数据超过标准值80%",YWLX:"DQYJ",YQBJSJ:16031808e5,YWZLX:"XZZ_15MINUTES",BLR:"scsuh",CJR:"SYSTEM",YHMC:"苏衡",RWBH:"90eb6695-03a6-412d-a0d0-47d1dd49af2a",SJKSSJ:1603095799e3,RWNR:"PM2.5湖山乡站连续15分钟数据超过标准值80%",ROW_ID:1,XH:"7d235c76-d880-4dd3-811b-182a810a3b41",FZJG:"JCZ",ZZJC:"监测站",RWLY:"大气",YWGLXH:"LYZ0020002",RWMC:"2020-10-19 16:23:19 湖山乡站连续15分钟数据超过标准值80%",BJQK:0},feedback:{},rules:{FKR:[{required:!0,message:"请填写反馈人"}],FKSJ:[{required:!0,message:"请选择反馈时间"}],FKNR:[{required:!0,message:"请填写情况反馈"}]},fileList:[],fileParam:{LXDM:"RWFK",ZLXDM:"fj",YWSJID:"",PXH:"",WJDX:1,WJLX:"",WJMC:""},echartData:{xAxis:[],series:[{name:"",data:[]}]},max:100,min:0,coMax:10,coMin:0,lineOption:{}}},props:["currentItem","edit"],methods:{clearData:function(){this.echartData={xAxis:[],series:[{name:"",data:[]}]},this.lineOption={},this.fileList=[],this.active=1},initData:function(t){var e=this;this.currentItem=t,this.clearData(),Object(n.c)(this.currentItem.XH).then((function(t){var a=t.data.detail,i=a.FKSJ;a.FKSJ=e.$dayjs(i).format("YYYY-MM-DD"),e.feedback=a,e.initFileData(t.data.fjxx),i="","DQYJ"===a.YWLX?(e.title="空气质量变化趋势",i=a.TYPE):"DBSYJ"===a.YWLX?(e.title="水质量变化趋势",i=a.TYPE):"WRYZXYJ"===a.YWLX&&(e.title="污染源质量变化趋势",i=a.YWZLX),e.edit&&null==a.FKR&&top.loginName&&(e.feedback.FKR=top.loginName),e.currentItem=a,(t.data.list.timeList||t.data.list.FQ||t.data.list.FS)&&e.getListData(t.data.list,a.YWLX,i)}))},initFileData:function(t){0<t.length&&(this.fileList=t.map((function(t){return l(l({},t),{},{name:t.FJMC,url:t.FJPATH})})))},dateFormat:function(t){return this.$dayjs(t).format("YYYY年MM月DD日HH:mm")},feedSubmit:function(){var t=this;this.$refs.ruleForm.validate((function(e){e&&(e={FKR:t.feedback.FKR,FKSJ:t.feedback.FKSJ,FKNR:t.feedback.FKNR,SFBJ:"1",XH:t.feedback.XH},Object(n.j)(e).then((function(e){void 0!==e&&e.success&&(t.edit=!1,t.$parent.$parent.dialogClose(),t.$parent.$parent.getListData())})))}))},handleRemove:function(t){t=t.FJXH||t.response.WJID,this.edit&&Object(n.a)(t)},handlePreview:function(t){t=t.FJXH||t.response.WJID,t=ServerGlobalConstant.BASE_URL+"/platform/file/filemanagecontroller/downloadfilebyid/"+t,window.open(t)},beforeRemove:function(t){return this.$confirm("确定移除 ".concat(t.name,"？"))},beforeUpload:function(t){var e=t.name,a="";-1!==e.indexOf(".")&&(a=e.substr(e.lastIndexOf(".")+1,e.length).toLowerCase()),this.fileParam.YWSJID=this.currentItem.XH,this.fileParam.WJDX=parseFloat((t.size/1024).toFixed(2)),this.fileParam.WJMC=e,this.fileParam.WJLX=a,this.fileParam.fileItem=t},fileUploadSuccess:function(){},getListData:function(t,e,a){"DQYJ"===e?this.getAirListData(t,a):"DBSYJ"===e?this.getWaterListData(t):"WRYZXYJ"===e&&(-1<a.indexOf("FS")?this.getFSListData(t.FS):-1<a.indexOf("FQ")&&this.getFQListData(t.FQ))},getFQListData:function(t){var e=[],a=t.timeList.map((function(t){return t.substr(5,8)}));e.push({name:"氮氧化物",type:"line",data:t.noxzsList}),e.push({name:"O₂",type:"line",data:t.o2List}),e.push({name:"SO₂",type:"line",data:t.so2zsList}),e.push({name:"烟尘",type:"line",yAxisIndex:1,data:t.yczsList}),this.echartData={xAxis:a,series:e},e=this.getListMaxAndMin(t,["so2zsList","noxzsList","o2List"]),t=this.getListMaxAndMin(t,["yczsList"]),this.getFQLineoption([e,t])},getFSListData:function(t){var e=[],a=t.timeList.map((function(t){return t.substr(5,8)}));e.push({name:"PH",type:"line",data:t.phList}),e.push({name:"氨氮",type:"line",data:t.nh3List}),e.push({name:"化学需氧量",type:"line",data:t.codList}),e.push({name:"总磷",type:"line",yAxisIndex:1,data:t.zlList}),this.echartData={xAxis:a,series:e},e=this.getListMaxAndMin(t,["phList","nh3List","codList"]),t=this.getListMaxAndMin(t,["zlList"]),this.getFSLineoption([e,t])},getWaterListData:function(t){var e=[],a=t.timeList.map((function(t){return t.substr(11,5)}));e.push({name:"高锰酸盐指数",type:"line",data:t.gmsjList}),e.push({name:"溶解氧",type:"line",data:t.rjyList}),e.push({name:"PH",type:"line",data:t.phList}),e.push({name:"氨氮",type:"line",yAxisIndex:1,data:t.nh3List}),e.push({name:"总磷",type:"line",yAxisIndex:1,data:t.zlList}),this.echartData={xAxis:a,series:e},e=this.getListMaxAndMin(t,["gmsjList","rjyList","phList"]),t=this.getListMaxAndMin(t,["nh3List","zlList"]),this.getWaterLineoption([e,t])},getAirListData:function(t,e){var a,i;void 0!==t.timeList&&(a=[],i=[],"MINUTE"===e?(a=t.timeList.map((function(t){return t.substr(11,5)})),i.push({name:"AQI",type:"line",data:t.aqiList})):"HOUR"===e&&(a=t.timeList.map((function(t){return t.substr(5,8)})),i.push({name:"AQI",type:"line",data:t.aqiList}),i.push({name:"O₃",type:"line",data:t.o3List})),i.push({name:"NO₂",type:"line",data:t.no2List}),i.push({name:"PM₁₀",type:"line",data:t.pm10List}),i.push({name:"PM₂.₅",type:"line",data:t.pm25List}),i.push({name:"SO₂",type:"line",data:t.so2List}),i.push({name:"CO",type:"line",yAxisIndex:1,data:t.coList}),this.echartData={xAxis:a,series:i},this.getMaxandMin(t),this.getAirLineoption())},getMaxandMin:function(t,e){var a=[],i=[];"HOUR"===e&&(a.push(Math.max.apply(null,t.aqiList)),a.push(Math.max.apply(null,t.o3List)),i.push(Math.min.apply(null,t.aqiList)),i.push(Math.min.apply(null,t.o3List))),a.push(Math.max.apply(null,t.no2List)),a.push(Math.max.apply(null,t.pm10List)),a.push(Math.max.apply(null,t.pm25List)),a.push(Math.max.apply(null,t.so2List)),i.push(Math.min.apply(null,t.no2List)),i.push(Math.min.apply(null,t.pm10List)),i.push(Math.min.apply(null,t.pm25List)),i.push(Math.min.apply(null,t.so2List)),this.max=Math.max.apply(null,a),this.min=Math.min.apply(null,i),this.coMax=Math.max.apply(null,t.coList),this.coMin=Math.min.apply(null,t.coList)},getListMaxAndMin:function(t,e){var a=[],i=[],n=0,s=100;return e.forEach((function(e){t[e]&&0<t[e].length&&(a.push(Math.max.apply(null,t[e])),i.push(Math.min.apply(null,t[e])))})),0<a.length&&(s=Math.max.apply(null,a)),0<i.length&&(n=Math.min.apply(null,i)),{min:n,max:s}},getAirLineoption:function(){this.lineOption={toolbox:{show:!1},legend:{show:!0,left:"center",bottom:20},yAxis:[{name:"",max:this.max,min:this.min,type:"value"},{name:"",max:this.coMax,min:this.coMin,type:"value"}],xAxis:{},grid:{left:"5%",top:"15%",bottom:"15%",right:"10%"},tooltip:{trigger:"axis"}}},getWaterLineoption:function(t){this.lineOption={toolbox:{show:!1},legend:{show:!0,left:"center",bottom:20},yAxis:[{name:"高锰酸盐指数/溶解氧/PH",max:t[0].max,min:t[0].min,type:"value"},{name:"氨氮/总磷",max:t[1].max,min:t[1].min,type:"value"}],xAxis:{},grid:{left:"5%",top:"15%",bottom:"15%",right:"10%"},tooltip:{trigger:"axis"}}},getFQLineoption:function(t){this.lineOption={toolbox:{show:!1},legend:{show:!0,left:"center",bottom:20},yAxis:[{name:"氮氧化物/O₂/SO₂",max:t[0].max,min:t[0].min,type:"value"},{name:"烟尘",max:t[1].max,min:t[1].min,type:"value"}],xAxis:{},grid:{left:"5%",top:"15%",bottom:"15%",right:"10%"},tooltip:{trigger:"axis"}}},getFSLineoption:function(t){this.lineOption={toolbox:{show:!1},legend:{show:!0,left:"center",bottom:20},yAxis:[{name:"PH/氨氮/化学需氧量",max:t[0].max,min:t[0].min,type:"value"},{name:"总磷",max:t[1].max,min:t[1].min,type:"value"}],xAxis:{},grid:{left:"5%",top:"15%",bottom:"15%",right:"10%"},tooltip:{trigger:"axis"}}}}},o=(a("1751"),a("6583"),a("2877"));r=Object(o.a)(r,(function(){var t=this,e=t.$createElement;e=t._self._c||e;return e("div",{staticStyle:{background:"#f7f7f7"}},[e("div",{staticClass:"pd-dlgbx"},[e("div",{staticClass:"pd-dlgbxbd",attrs:{id:"tabs-1"}},[e("div",{staticClass:"gap"}),e("ul",{staticClass:"pd-ultbs2"},[e("li",{class:{on:1==t.active},on:{click:function(e){t.active=1}}},[e("i",[t._v("预警信息")])]),e("li",{class:{on:2==t.active},on:{click:function(e){t.active=2}}},[e("i",[t._v("任务反馈")])])]),e("div",{staticClass:"gap"}),e("div",{staticClass:"gap"}),e("div",{staticClass:"panel-1"},[1==t.active?e("div",{staticClass:"con"},[t._m(0),e("div",{staticClass:"pd-modbd"},[e("table",{staticClass:"pd-tablelst2a",attrs:{cellpadding:"0"}},[t._m(1),e("tr",[e("td",{staticClass:"td-hd"},[t._v("报警时间")]),e("td",[t._v("\n                                    "+t._s(t.currentItem.SJKSSJ)+"\n                                ")]),e("td",{staticClass:"td-hd"},[t._v("任务来源")]),e("td",[t._v(t._s(t.currentItem.RWLY))])]),e("tr",[e("td",{staticClass:"td-hd"},[t._v("责任科室")]),e("td",[t._v(t._s(t.currentItem.ZZJC))]),e("td",{staticClass:"td-hd"},[t._v("办理人")]),e("td",[t._v(t._s(t.currentItem.YHMC))])]),e("tr",[e("td",{staticClass:"td-hd"},[t._v("要求办结时间")]),e("td",[t._v("\n                                    "+t._s(t.currentItem.YQBJSJ)+"\n                                ")]),e("td",{staticClass:"td-hd"},[t._v("是否超期")]),e("td",[t._v("\n                                    "+t._s(0==t.currentItem.SFCQ?"否":"是")+"\n                                ")])]),e("tr",[e("td",{staticClass:"td-hd"},[t._v("任务内容")]),e("td",{attrs:{colspan:"3"}},[t._v("\n                                    "+t._s(t.currentItem.RWNR)+"\n                                ")])]),e("tr",[e("td",{staticClass:"td-hd"},[t._v("预警规则")]),e("td",{attrs:{colspan:"3"}},[t._v("\n                                    "+t._s(t.currentItem.GZ)+"\n                                ")])])])]),e("div",{staticClass:"gap"}),e("div",{staticClass:"gap"}),e("div",{staticClass:"pd-modhd"},[e("strong",[t._v(" "+t._s(t.title))])]),e("div",{staticClass:"pd-modbd"},[e("div",{staticClass:"gap"}),e("p-line",{ref:"lineChart",staticClass:"db auto",staticStyle:{width:"1400px",height:"400px"},attrs:{config:{color:t.airGradesColor},data:t.echartData,"show-option":!0,option:t.lineOption}})],1)]):t._e(),2==t.active?e("div",{staticClass:"con"},[t._m(2),e("div",{staticClass:"pd-modbd"},[e("ul",{staticClass:"pd-ulbx1"},[e("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.feedback,rules:t.rules}},[e("li",[e("div",{staticClass:"divic1"},[e("el-form-item",{staticClass:"labic1",attrs:{label:"反馈人：",prop:"FKR"}},[e("el-input",{staticStyle:{width:"234px"},attrs:{disabled:!t.edit},model:{value:t.feedback.FKR,callback:function(e){t.$set(t.feedback,"FKR",e)},expression:"feedback.FKR"}})],1)],1),e("div",{staticClass:"divic2"},[e("el-form-item",{staticClass:"labic2",attrs:{label:"反馈时间：",prop:"FKSJ"}},[e("el-date-picker",{staticClass:"dateLine",attrs:{format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期",disabled:!t.edit},on:{change:t.getData},model:{value:t.feedback.FKSJ,callback:function(e){t.$set(t.feedback,"FKSJ",e)},expression:"feedback.FKSJ"}})],1)],1)]),e("li",[e("el-form-item",{staticClass:"labic3",attrs:{label:"情况反馈",prop:"FKNR"}},[e("div",{staticClass:"gap"}),e("el-input",{staticClass:"el-txtarea",attrs:{type:"textarea",disabled:!t.edit},model:{value:t.feedback.FKNR,callback:function(e){t.$set(t.feedback,"FKNR",e)},expression:"feedback.FKNR"}})],1)],1),e("li",[e("label",{staticClass:"labic4"},[t._v("附件：")]),e("el-upload",{staticClass:"upload-demo",attrs:{action:"/suichang/platform/file/filemanagecontroller/upload","on-preview":t.handlePreview,"on-remove":t.handleRemove,"before-remove":t.beforeRemove,"before-upload":t.beforeUpload,"on-success":t.fileUploadSuccess,multiple:"","file-list":t.fileList,data:t.fileParam,disabled:!t.edit}},[e("el-button",{staticClass:"pd-upbtn",attrs:{size:"small",type:"primary",disabled:!t.edit}},[e("img",{attrs:{src:a("0dfb"),alt:""}}),t._v("上传")])],1)],1)])],1),e("div",{staticClass:"pd-botbtn"},[e("button",{directives:[{name:"show",rawName:"v-show",value:t.edit,expression:"edit"}],staticClass:"btn",attrs:{type:"button"},on:{click:t.feedSubmit}},[t._v("\n                                提交\n                            ")])])])]):t._e()])])])])}),[function(){var t=this.$createElement;t=this._self._c||t;return t("div",{staticClass:"pd-modhd"},[t("strong",[this._v("预警信息")])])},function(){var t=this.$createElement;t=this._self._c||t;return t("colgroup",[t("col",{attrs:{width:"15%"}}),t("col",{attrs:{width:"35%"}}),t("col",{attrs:{width:"15%"}}),t("col",{attrs:{width:"35%"}})])},function(){var t=this.$createElement;t=this._self._c||t;return t("div",{staticClass:"pd-modhd"},[t("strong",[this._v("反馈信息")])])}],!1,null,"0b367320",null);e.default=r.exports},"7f7f":function(t,e,a){var i=a("86cc").f,n=Function.prototype,s=/^\s*function ([^ (]*)/;"name"in n||a("9e1e")&&i(n,"name",{configurable:!0,get:function(){try{return(""+this).match(s)[1]}catch(t){return""}}})},a535:function(t,e,a){},abb3:function(t,e,a){}}]);